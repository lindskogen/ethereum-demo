import web3 from '../web3'
export const Auction = web3.eth.contract([{"constant":true,"inputs":[],"name":"leadingBid","outputs":[{"name":"","type":"uint256"}],"type":"function"},{"constant":true,"inputs":[],"name":"leader","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[],"name":"isSeller","outputs":[{"name":"isSeller","type":"bool"}],"type":"function"},{"constant":false,"inputs":[],"name":"returnPrevBid","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"winner","outputs":[{"name":"","type":"address"}],"type":"function"},{"constant":false,"inputs":[],"name":"placeBid","outputs":[],"type":"function"},{"constant":true,"inputs":[],"name":"item","outputs":[{"name":"","type":"string"}],"type":"function"},{"constant":false,"inputs":[],"name":"endAuction","outputs":[],"type":"function"},{"inputs":[{"name":"name","type":"string"},{"name":"initialPrice","type":"uint256"}],"type":"constructor"}]);


export const getAuction = (address) => Auction.at(address)

export function createAuction(name, price, seller, callback) {
    return Auction.new(
       name,
       price,
       {
         from: seller,
         data: '6060604052604051610698380380610698833981016040528080518201919060200180519060200190919050505b33600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908302179055508160036000509080519060200190828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a757805160ff19168380011785556100d8565b828001600101855582156100d8579182015b828111156100d75782518260005055916020019190600101906100b9565b5b50905061010391906100e5565b808211156100ff57600081815060009055506001016100e5565b5090565b5050806004600050819055505b5050610578806101206000396000f36060604052361561008a576000357c010000000000000000000000000000000000000000000000000000000090048063074b52701461008c57806340eedabb146100af578063a7541e9f146100e8578063c88093151461010b578063dfbf53ae1461011a578063ecfc7ecc14610153578063f2a4a82e14610162578063fe67a54b146101dd5761008a565b005b61009960048050506102d9565b6040518082815260200191505060405180910390f35b6100bc60048050506101ec565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b6100f5600480505061050e565b6040518082815260200191505060405180910390f35b6101186004805050610368565b005b6101276004805050610212565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61016060048050506102e2565b005b61016f6004805050610238565b60405180806020018281038252838181518152602001915080519060200190808383829060006004602084601f0104600f02600301f150905090810190601f1680156101cf5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6101ea6004805050610408565b005b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60036000508054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102d15780601f106102a6576101008083540402835291602001916102d1565b820191906000526020600020905b8154815290600101906020018083116102b457829003601f168201915b505050505081565b60046000505481565b600460005054341115610331576102f7610368565b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff0219169083021790555034600460005081905550610365565b3373ffffffffffffffffffffffffffffffffffffffff16600034604051809050600060405180830381858888f19350505050505b5b565b6000600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561040557600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166000600460005054604051809050600060405180830381858888f19350505050505b5b565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561046457610002565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690830217905550600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166000600460005054604051809050600060405180830381858888f19350505050505b565b6000600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561056c57610002565b60019050610575565b9056',
         gas: 3000000
       },
       callback)
}
